У меня есть метод, в котором вычисляется средняя яркость определенного участка изображения. Сначала я перевожу изображение в градации серого, затем обрезаю его по заданным границам. Потом нахожу высоту и ширину вырезанного участка для подсчёта его площади. В цикле складываются яркости всех пикселей. Функция возвращает среднее арифметическое, которое равно дроби, у которой в числителе сумма яркостей пикселей, а в знаменателе площадь вырезанного участка изображения.

Далее задаются границы для вырезания и папка с изображениями. Затем я инициализирую массивы для EV и средней яркости. Потом прохожусь по всем файлам в папке и паршу из их названий EV текущего изображения. В конце гружу фото в OpenCV и вычисляю среднюю яркость заданного участка.
